{"version":3,"sources":["Components/PrivateRoot.js","Components/Header.js","Components/Accordeon.js","additional/utils.js","Components/PathList.js","Components/Permanent.js","Components/Temporary.js","Components/LoginForm.js","additional/socket.js","App.js","reportWebVitals.js","index.js"],"names":["PrivateRoute","Component","component","authed","transport","callback","redirect","rest","render","props","to","Header","state","className","src","alt","this","location","pathname","React","withRouter","Accordeon","toAccaredon","dataset","path","res","map","item","index","bodyRef","createRef","iconRef","children","onClick","onItemClick","name","current","classList","toggle","forceUpdate","process","ref","style","marginLeft","findPlace","departureFolder","currentPath","indexOf","dirs","split","folder","f","copyToClipboard","str","input","document","createElement","value","body","appendChild","select","execCommand","removeChild","toFlat","departure","destination","withFolders","push","convert","sizeInBytes","units","Math","floor","log10","unit","pow","round","Number","EPSILON","PathList","timeout","renameValue","imgSrc","active","includes","holdTime","onDoubleClick","goTo","renameIndex","onChange","event","setState","target","onKeyPress","key","onRename","capacity","Permanent","favourites","selected","selectState","creatingNewFolder","newFolderName","buffers","rebuildStructure","structure","Object","getOwnPropertyNames","getPrototypeOf","bind","a","addEventListener","length","rename","socketCall","fileList","files","file","bufferCall","then","token","window","origin","catch","console","log","names","splice","slice","display","id","type","filesSelected","multiple","htmlFor","addToFavourites","createLink","download","delete","newName","fullName","Temporary","tab","chosen","availableFiles","error","timer","err","message","clearTimeout","setTimeout","showError","Error","innerText","trim","downloadButton","getFilenames","el","uploadTab","fileUploadChange","upload","downloadTab","tokenInputChange","LoginForm","login","password","match","user","placeholder","auth","Transport","counter","socket","WebSocket","host","callId","calls","Map","data","packet","JSON","parse","promised","get","resolve","reject","code","result","dataBlob","blobUrl","URL","createObjectURL","link","href","setAttribute","click","parentNode","revokeObjectURL","downloadFile","lastIndexOf","Promise","readyState","OPEN","msg","args","ready","set","send","stringify","buffer","NotFound","App","localStorage","getItem","exact","setItem","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.205312fb.chunk.js","sourcesContent":["import React from \"react\";\nimport { Route, Redirect } from \"react-router-dom\";\n\nexport default function PrivateRoute({\n  component: Component,\n  authed,\n  transport,\n  callback,\n  redirect,\n  ...rest\n}) {\n  return (\n    <Route\n      {...rest}\n      render={(props) =>\n        authed === true ? (\n          <Component\n            authed={authed}\n            transport={transport}\n            callback={callback}\n            {...props}\n          />\n        ) : (\n          <Redirect to={redirect} />\n        )\n      }\n    />\n  );\n}\n","import React from \"react\";\nimport { withRouter, Link } from \"react-router-dom\";\n\nclass Header extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n\n  render() {\n    return (\n      <div className=\"header\">\n        <div className=\"logo-box\">\n          <img\n            className=\"logo\"\n            src={process.env.PUBLIC_URL + \"/icons/logo.svg\"}\n            alt=\"\"\n          />\n        </div>\n        <div className=\"locations\">\n          <Link\n            className={`location ${\n              this.props.location.pathname === \"/permanent\" ? \"active\" : \"\"\n            }`}\n            to=\"/permanent\"\n          >\n            Permanent\n          </Link>\n          <Link\n            className={`location ${\n              this.props.location.pathname === \"/temporary\" ? \"active\" : \"\"\n            }`}\n            to=\"/temporary\"\n          >\n            Temporary\n          </Link>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default withRouter((props) => <Header {...props} />);\n","import React from \"react\";\n\nexport default class Accordeon extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n\n  render() {\n    const toAccaredon = (dataset, path = \"\") => {\n      const res = dataset.map((item, index) => {\n        let bodyRef = React.createRef();\n        let iconRef = React.createRef();\n        return item.children !== null ? (\n          <div key={index} className=\"accordeon\">\n            <div className=\"accordeon-head\">\n              <div\n                className=\"accordeon-title\"\n                onClick={() => this.props.onItemClick(item, path)}\n              >\n                {item.name}\n              </div>\n              <button\n                className=\"dropdown-button\"\n                onClick={() => {\n                  bodyRef.current.classList.toggle(\"active\");\n                  iconRef.current.classList.toggle(\"active\");\n                  this.forceUpdate();\n                }}\n              >\n                <img\n                  className=\"dropdown-icon\"\n                  src={`${process.env.PUBLIC_URL}/icons/arrow.svg`}\n                  alt=\"Dropdown\"\n                  ref={iconRef}\n                />\n              </button>\n            </div>\n            <div\n              className=\"accordeon-body\"\n              style={{ marginLeft: \"16px\" }}\n              ref={bodyRef}\n            >\n              {toAccaredon(item.children, `${path}${item.name}/`)}\n            </div>\n          </div>\n        ) : (\n          <div\n            key={index}\n            className=\"file-title\"\n            onClick={() => this.props.onItemClick(item, path)}\n          >\n            {item.name}\n          </div>\n        );\n      });\n      return res;\n    };\n    return toAccaredon(this.props.dataset);\n  }\n}\n","export const findPlace = (departureFolder, currentPath) => {\n  if (currentPath.indexOf(\"/\") === -1) return departureFolder;\n  const dirs = currentPath.split(\"/\");\n  let children = departureFolder;\n\n  for (const folder of dirs)\n    for (const item of children) if (item.name === folder) children = item.children;\n  return children;\n};\n\nexport const downloadFile = (name, dataBlob) => {\n  const blobUrl = window.URL.createObjectURL(dataBlob);\n  const link = document.createElement(\"a\");\n  link.href = blobUrl;\n  link.setAttribute(\"download\", name);\n  document.body.appendChild(link);\n  link.click();\n  link.parentNode.removeChild(link);\n  window.URL.revokeObjectURL(blobUrl);\n};\n\nexport const copyToClipboard = (str) => {\n  const input = document.createElement(\"textarea\");\n  input.value = str;\n  document.body.appendChild(input);\n  input.select();\n  document.execCommand(\"copy\");\n  document.body.removeChild(input);\n};\n\nexport const toFlat = (\n  currentPath,\n  departure,\n  destination = [],\n  withFolders = false\n) => {\n  for (const item of departure)\n    if (item.children !== null) {\n      toFlat(\n        `${currentPath}${item.name}/`,\n        item.children,\n        destination,\n        withFolders\n      );\n      if (withFolders) destination.push(`${currentPath}${item.name}/`);\n    } else destination.push(`${currentPath}${item.name}`);\n  return destination;\n};\n","import React from \"react\";\nimport { findPlace } from \"../additional/utils\";\n\nconst convert = (sizeInBytes) => {\n  const units = [\"b\", \"Kb\", \"Mb\", \"Gb\", \"Tb\"];\n  const index = Math.floor(Math.log10(sizeInBytes) / 3);\n  const unit = units[index];\n  const res = (sizeInBytes / Math.pow(10, index * 3)) | 0;\n\n  return `${Math.round((res + Number.EPSILON) * 100) / 100} ${\n    unit ? unit : units[0]\n  }`;\n};\n\nexport default class PathList extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      timeout: null,\n      renameValue: \"\",\n    };\n  }\n\n  render() {\n    return (\n      <ul className=\"current-folder-list\">\n        {\" \"}\n        {findPlace(this.props.dataset, this.props.currentPath).map(\n          (item, index) => {\n            const imgSrc =\n              item.children === null\n                ? `${process.env.PUBLIC_URL}/icons/file.svg`\n                : `${process.env.PUBLIC_URL}/icons/folder.svg`;\n            const className =\n              (this.props.active.includes(item) ? \"active \" : \"\") +\n              \"folder-list-el\";\n            const holdTime = this.props.holdTime | 200;\n            let name = item.name;\n\n            return (\n              <li\n                className={className}\n                key={index}\n                onDoubleClick={() => {\n                  this.props.goTo(item);\n                }}\n                onClick={() => {\n                  this.props.select(item);\n                }}\n              >\n                <img className=\"el-icon\" src={imgSrc} />\n                {this.props.renameIndex === index ? (\n                  <input\n                    className=\"el-input\"\n                    value={this.state.renameValue || item.name}\n                    onChange={(event) => {\n                      this.setState({ renameValue: event.target.value });\n                    }}\n                    onKeyPress={(event) => {\n                      if (event.key === \"Enter\") {\n                        this.props.onRename(this.state.renameValue);\n                        this.setState({ renameValue: \"\" });\n                      }\n                    }}\n                  />\n                ) : (\n                  <div className=\"el-name\">{item.name}</div>\n                )}\n                <div className=\"el-capacity\">{convert(item.capacity)}</div>\n              </li>\n            );\n          }\n        )}\n      </ul>\n    );\n  }\n}\n","import React from \"react\";\nimport Header from \"./Header\";\nimport Accordeon from \"./Accordeon\";\nimport PathList from \"./PathList\";\nimport { findPlace, copyToClipboard, toFlat } from \"../additional/utils\";\n\nexport default class Permanent extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      dataset: [],\n      currentPath: \"\",\n      favourites: [{ path: \"\", name: \"home\" }],\n      selected: [],\n      selectState: false,\n      creatingNewFolder: false,\n      newFolderName: \"New Folder\",\n      renameIndex: -1,\n    };\n\n    this.buffers = [];\n    this.transport = this.props.transport;\n    this.transport.rebuildStructure = (structure) => {\n      this.setState({\n        dataset: structure,\n        selected: [],\n        renameIndex: -1,\n        selectState: false,\n        creatingNewFolder: false,\n      });\n    };\n\n    // this.uploadModalContent =\n    //   <div className=\"upload-modal-content\">\n    //     <input id=\"files\" type=\"file\" value = { this.state.value } onChange = { this.fileUploadChange  } multiple/>\n    //     <div className=\"chosen\">Chosen:</div>\n    //     <ul id=\"file-list\">\n    //       { this.state.chosen.map((el, index) => <li key={index}>{ el }</li>) }\n    //     </ul>\n    //     <label id=\"choose-btn\" htmlFor=\"files\">Choose files</label>\n    //   </div>;\n\n    // this.uploadModal = React.createRef();\n\n    for (const key of Object.getOwnPropertyNames(Object.getPrototypeOf(this))) {\n      if (![\"constructor\", \"render\"].includes(key)) {\n        this[key] = this[key].bind(this);\n      }\n    }\n  }\n\n  async componentDidMount() {\n    document.addEventListener(\n      \"keydown\",\n      (event) => {\n        if (\n          event.key === \"F2\" &&\n          this.state.selected.length === 1 &&\n          this.state.renameIndex === -1\n        )\n          this.rename();\n      },\n      false\n    );\n    if (this.props.authed) {\n      const dataset = await this.transport.socketCall(\"availableStructure\", {});\n      this.setState({ dataset });\n    }\n  }\n\n  async filesSelected(event) {\n    const fileList = [];\n    for (const file of event.target.files) fileList.push(`${this.state.currentPath}${file.name}`);\n    await this.transport.socketCall(\"pmtUploadStart\", { fileList });\n    for (const file of event.target.files) await this.transport.bufferCall(file);\n    await this.transport.socketCall(\"pmtUploadEnd\", { fileList });\n    event.target.value = \"\";\n  }\n\n  createLink() {\n    const onlyFile =\n      this.state.selected.length === 1 &&\n      this.state.selected[0].children === null;\n\n    if (onlyFile) {\n      const name = `${this.state.currentPath}${this.state.selected[0].name}`;\n\n      this.transport\n        .socketCall(\"createLink\", { name })\n        .then(async (token) => {\n          copyToClipboard(`${window.location.origin}/link/${token}`);\n        })\n        .catch(console.log);\n    }\n  }\n\n  download() {\n    const fileList = toFlat(this.state.currentPath, this.state.selected);\n\n    console.log(fileList, this.state.currentPath);\n    this.transport.names = fileList;\n    this.transport.socketCall(\"pmtDownload\", { fileList }).catch(console.log);\n  }\n\n  delete() {\n    const fileList = toFlat(\n      this.state.currentPath,\n      this.state.selected,\n      [],\n      true\n    );\n    console.log(fileList);\n    this.transport.socketCall(\"delete\", { fileList }).then().catch(console.log);\n  }\n\n  rename() {\n    if (this.state.selected.length === 1) {\n      console.log(this.state.selected);\n      const { name } = this.state.selected[0];\n      const place = findPlace(this.state.dataset, this.state.currentPath);\n      const names = place.map((item) => item.name);\n      const renameIndex = names.indexOf(name);\n      this.setState({ renameIndex });\n    }\n  }\n\n  addToFavourites() {\n    const onlyFolder =\n      this.state.selected.length === 1 &&\n      this.state.selected[0].children !== null;\n\n    if (onlyFolder) {\n      const { name } = this.state.selected[0];\n      const { favourites } = this.state;\n      const favouritesNames = favourites.map((item) => item.name);\n\n      if (favouritesNames.includes(name)) {\n        const index = favourites.indexOf(name);\n        favourites.splice(index, 1);\n      } else favourites.push({ name, path: name + \"/\" });\n      this.setState({ favourites });  \n    }\n  }\n\n  goTo(item) {\n    if (item.children !== null && this.state.renameIndex === -1) {\n      this.setState({\n        currentPath: `${this.state.currentPath}${item.name}/`,\n        selected: [],\n        renameIndex: -1,\n        selectState: false,\n        creatingNewFolder: false,\n      });\n    }\n  }\n\n  render() {\n    return (\n      <div>\n        {/* <Modal ref={ this.uploadModal } content={ this.uploadModalContent } title=\"Upload\"/> */}\n        <Header />\n        <div className=\"permanent\">\n          <div className=\"explorer\">\n            <div className=\"list-header\">\n              <div className=\"path\">\n                {\"/\" + this.state.currentPath.slice(0, -1)}\n              </div>\n              <input\n                style={{ display: \"none\" }}\n                id=\"files\"\n                type=\"file\"\n                onChange={this.filesSelected}\n                multiple\n              />\n              <div className=\"control-buttons\">\n                <button\n                  className={\"active control-button\"}\n                  onClick={() => {\n                    this.setState({\n                      creatingNewFolder: true,\n                      newFolderName: \"New Folder\",\n                    });\n                  }}\n                >\n                  <img\n                    src={`${process.env.PUBLIC_URL}/icons/newfolder.svg`}\n                    alt=\"New Folder\"\n                  />\n                </button>\n                <label className=\"active control-button\" htmlFor=\"files\">\n                  <img\n                    src={`${process.env.PUBLIC_URL}/icons/upload.svg`}\n                    alt=\"Upload\"\n                  />\n                </label>\n                <button\n                  className={\n                    (this.state.selected.length === 1 &&\n                    this.state.selected[0].children !== null\n                      ? \"active \"\n                      : \"\") + \"control-button\"\n                  }\n                  onClick={this.addToFavourites}\n                >\n                  <img\n                    src={`${process.env.PUBLIC_URL}/icons/bookmark.svg`}\n                    alt=\"Bookmark\"\n                  />\n                </button>\n                <button\n                  className={\n                    (this.state.selected.length === 1 &&\n                    this.state.selected[0].children === null\n                      ? \"active \"\n                      : \"\") + \"control-button\"\n                  }\n                  onClick={this.createLink}\n                >\n                  <img\n                    src={`${process.env.PUBLIC_URL}/icons/link.svg`}\n                    alt=\"Link\"\n                  />\n                </button>\n                <button\n                  className={\n                    (this.state.selected.length === 1 ? \"active \" : \"\") +\n                    \"control-button\"\n                  }\n                  onClick={this.rename}\n                >\n                  <img\n                    src={`${process.env.PUBLIC_URL}/icons/edit.svg`}\n                    alt=\"Edit\"\n                  />\n                </button>\n                <button\n                  className={\n                    (this.state.selected.length === 0 ? \"\" : \"active \") +\n                    \"control-button\"\n                  }\n                  onClick={this.download}\n                >\n                  <img\n                    src={`${process.env.PUBLIC_URL}/icons/download.svg`}\n                    alt=\"Download\"\n                  />\n                </button>\n                <button\n                  className={\n                    (this.state.selected.length === 0 ? \"\" : \"active \") +\n                    \"control-button\"\n                  }\n                  onClick={this.delete}\n                >\n                  <img\n                    src={`${process.env.PUBLIC_URL}/icons/delete.svg`}\n                    alt=\"Delete\"\n                  />\n                </button>\n              </div>\n            </div>\n            <div className=\"main\">\n              <div className=\"navbar\">\n                <div className=\"favourites\">\n                  {this.state.favourites.map((item, index) => (\n                    <div\n                      className=\"favourites-title\"\n                      key={index}\n                      onClick={() => {\n                        if (this.state.renameIndex === -1) {\n                          this.setState({\n                            currentPath: item.path,\n                            selected: [],\n                            renameIndex: -1,\n                            selectState: false,\n                            creatingNewFolder: false,\n                          });\n                        }\n                      }}\n                    >\n                      {item.name}\n                    </div>\n                  ))}\n                </div>\n                <Accordeon\n                  dataset={this.state.dataset}\n                  onItemClick={(item, path) => {\n                    if (item.children !== null)\n                      this.setState({\n                        currentPath: `${path}${item.name}/`,\n                        selected: [],\n                        renameIndex: -1,\n                        selectState: false,\n                        creatingNewFolder: false,\n                      });\n                  }}\n                />\n              </div>\n              <div className=\"hierarchy\">\n                <PathList\n                  currentPath={this.state.currentPath}\n                  dataset={this.state.dataset}\n                  active={this.state.selected}\n                  renameIndex={this.state.renameIndex}\n                  onRename={(newName) => {\n                    const item = this.state.selected[0];\n                    const { name } = item;\n                    const fullName = `${this.state.currentPath}${name}${\n                      item.children === null ? \"\" : \"/\"\n                    }`;\n                    this.setState({ renameIndex: -1, selected: [] });\n                    this.transport.socketCall(\"rename\", {\n                      name: fullName,\n                      newName: `${this.state.currentPath}${newName}${\n                        item.children === null ? \"\" : \"/\"\n                      }`,\n                    });\n                  }}\n                  goTo={this.goTo}\n                  select={(item) => {\n                    if (this.state.renameIndex === -1) {\n                      if (!this.state.selected.includes(item))\n                        this.state.selected.push(item);\n                      else {\n                        const index = this.state.selected.indexOf(item);\n                        this.state.selected.splice(index, 1);\n                      }\n                      this.forceUpdate();\n                    }\n                  }}\n                />\n                {this.state.creatingNewFolder ? (\n                  <div className=\"new-folder\">\n                    <img\n                      className=\"el-icon\"\n                      src={`${process.env.PUBLIC_URL}/icons/folder.svg`}\n                    />\n                    <input\n                      className=\"el-input\"\n                      value={this.state.newFolderName}\n                      onChange={(event) =>\n                        this.setState({ newFolderName: event.target.value })\n                      }\n                      onKeyPress={(event) => {\n                        if (event.key === \"Enter\") {\n                          this.transport.socketCall(\"newFolder\", {\n                            name: `${this.state.currentPath}${this.state.newFolderName}/`,\n                          });\n                        }\n                      }}\n                    ></input>\n                  </div>\n                ) : (\n                  \"\"\n                )}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport Header from \"./Header\";\nimport { copyToClipboard, downloadFile } from \"../additional/utils\";\n\nexport default class Temporary extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      files: [],\n      tab: \"upload\",\n      chosen: [\"None\"],\n      token: \"\",\n      availableFiles: [],\n      input: \"\",\n      error: \"\",\n    };\n    this.timer = null;\n    this.buffers = [];\n    this.transport = this.props.transport;\n\n    for (const key of Object.getOwnPropertyNames(Object.getPrototypeOf(this))) {\n      if (![\"constructor\", \"render\"].includes(key)) {\n        this[key] = this[key].bind(this);\n      }\n    }\n  }\n\n  showError(err) {\n    this.setState({ error: err.message });\n    if (this.timer) clearTimeout(this.timer);\n    this.timer = setTimeout(() => this.setState({ error: \"\" }), 5000);\n  }\n\n  fileUploadChange(event) {\n    const chosen = [];\n\n    for (const file of event.target.files) {\n      chosen.push(file.name);\n    }\n    this.setState({ files: event.target.files, chosen });\n  }\n\n  tokenInputChange(event) {\n    this.setState({ input: event.target.value, availableFiles: [] });\n  }\n\n  async upload() {\n    if (this.state.chosen.length === 1 && this.state.chosen[0] === \"None\") {\n      this.showError(new Error(\"Nothing selected. Select, then upload\"));\n      return;\n    }\n\n    this.setState({ token: \"loading...\" });\n\n    const fileList = [];\n\n    for (const file of this.state.files) fileList.push(file.name);\n    this.transport\n      .socketCall(\"tmpUpload\", { fileList })\n      .then((token) => {\n        for (const file of this.state.files) this.transport.bufferCall(file);\n\n        this.setState({\n          token,\n          files: [],\n          chosen: [\"None\"],\n          availableFiles: [],\n        });\n      })\n      .catch(this.showError);\n  }\n\n  getFilenames() {\n    if (this.state.input.length === 0) {\n      this.showError(new Error(\"Enter valid token please\"));\n      return;\n    }\n    this.transport\n      .socketCall(\"availableFiles\", { token: this.state.input })\n      .then((availableFiles) => this.setState({ availableFiles }))\n      .catch(this.showError);\n  }\n\n  download(event) {\n    const fileList =\n      event.target.innerText === \"Download All\"\n        ? this.state.availableFiles\n        : [event.target.innerText];\n\n    this.transport.names = fileList;\n    this.transport\n      .socketCall(\"tmpDownload\", {\n        token: this.state.input.trim(),\n        fileList,\n      })\n      .catch(this.showError);\n  }\n\n  render() {\n    let downloadButton =\n      this.state.availableFiles.length === 0 ? (\n        <button className=\"form-btn\" onClick={this.getFilenames}>\n          Check Available\n        </button>\n      ) : (\n        <div className=\"available\">\n          <h1 className=\"form-title\">Available:</h1>\n          <ul id=\"file-list\">\n            {this.state.availableFiles.map((el) => (\n              <li>\n                <a download={el} onClick={this.download}>\n                  {el}\n                </a>\n              </li>\n            ))}\n          </ul>\n          <button className=\"form-btn\" onClick={this.download}>\n            Download All\n          </button>\n        </div>\n      );\n\n    let uploadTab = (\n      <div className=\"upload tab\">\n        <input\n          id=\"files\"\n          type=\"file\"\n          value={this.state.value}\n          onChange={this.fileUploadChange}\n          multiple\n        />\n        {this.state.token !== \"\" ? (\n          <h1 className=\"form-token \">\n            Your token: {this.state.token}\n            <button\n              className=\"active control-button\"\n              onClick={() => {\n                copyToClipboard(this.state.token);\n              }}\n            >\n              <img\n                src={`${process.env.PUBLIC_URL}/icons/copy.svg`}\n                alt=\"copy\"\n              />\n            </button>\n          </h1>\n        ) : (\n          \"\"\n        )}\n        <h1 className=\"form-title\">Chosen:</h1>\n        <ul id=\"file-list\">\n          {this.state.chosen.map((el, index) => (\n            <li key={index}>{el}</li>\n          ))}\n        </ul>\n        <div className=\"buttons\">\n          <label className=\"input-btn form-btn\" htmlFor=\"files\">\n            Choose files\n          </label>\n          <button className=\"form-btn\" onClick={this.upload}>\n            Upload\n          </button>\n        </div>\n      </div>\n    );\n\n    let downloadTab = (\n      <div className=\"download tab\">\n        <h1 className=\"form-title\">Enter Token</h1>\n        <input\n          id=\"token\"\n          type=\"text\"\n          value={this.state.input}\n          onChange={this.tokenInputChange}\n        />\n        {downloadButton}\n      </div>\n    );\n\n    return (\n      <div>\n        <Header />\n        <div className=\"temporary\">\n          <div className=\"tabs\">\n            <button\n              className={\n                \"tab-btn \" + (this.state.tab === \"upload\" ? \"active\" : \"\")\n              }\n              onClick={() => this.setState({ tab: \"upload\" })}\n            >\n              Upload\n            </button>\n            <button\n              className={\n                \"tab-btn \" + (this.state.tab === \"download\" ? \"active\" : \"\")\n              }\n              onClick={() => this.setState({ tab: \"download\" })}\n            >\n              Download\n            </button>\n          </div>\n          <div className=\"tabulator\">\n            {this.state.tab === \"upload\" ? uploadTab : downloadTab}\n          </div>\n          <h1 className=\"error-box\">{this.state.error}</h1>\n        </div>\n      </div>\n    );\n  }\n}\n","import React from \"react\";\n\nexport default class LoginForm extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      login: \"\",\n      password: \"\",\n      error: \"\",\n    };\n    this.timer = null;\n    this.transport = this.props.transport;\n\n    for (const key of Object.getOwnPropertyNames(Object.getPrototypeOf(this))) {\n      if (![\"constructor\", \"render\"].includes(key)) {\n        this[key] = this[key].bind(this);\n      }\n    }\n  }\n\n  auth() {\n    const errorEvents = [\n      [\n        this.state.login.length < 5 ||\n          this.state.password.length < 5 ||\n          this.state.login.length > 16 ||\n          this.state.password.length > 16,\n        { message: \"Login & password length should be 5..16\" },\n      ],\n      [\n        this.state.login.match(\"^[a-zA-Z0-9_.-]*$\") === null ||\n          this.state.password.match(\"^[a-zA-Z0-9_.-]*$\") === null,\n        { message: \"Login & password should only contain [a-zA-Z0-9_.-]\" },\n      ],\n    ];\n\n    for (const event of errorEvents) {\n      if (event[0]) {\n        this.showError(event[1]);\n        return;\n      }\n    }\n\n    this.transport\n      .socketCall(\"authUser\", {\n        user: { login: this.state.login, password: this.state.password },\n      })\n      .then(this.props.callback)\n      .catch(this.showError);\n  }\n\n  showError(err) {\n    console.log(\"IN SHOWERROR: \", err);\n    this.setState({ error: err.message });\n    if (this.timer) clearTimeout(this.timer);\n    this.timer = setTimeout(() => this.setState({ error: \"\" }), 5000);\n  }\n\n  render() {\n    return (\n      <div className=\"login-form\">\n        <h1 className=\"form-title\">Login</h1>\n        <input\n          className=\"form-field\"\n          value={this.login}\n          onChange={(event) => this.setState({ login: event.target.value })}\n          type=\"text\"\n          name=\"input\"\n          placeholder=\"Enter login\"\n        />\n        <input\n          className=\"form-field\"\n          value={this.password}\n          onChange={(event) => this.setState({ password: event.target.value })}\n          type=\"password\"\n          name=\"input\"\n          placeholder=\"Enter password\"\n        />\n        <button className=\"form-button\" onClick={this.auth}>\n          Login\n        </button>\n        <h1 className=\"error-box\">{this.state.error}</h1>\n      </div>\n    );\n  }\n}\n","import { downloadFile } from \"./utils\";\n\nexport default class Transport {\n  constructor() {\n    this.rebuildStructure = null;\n    this.names = [];\n    this.counter = 0;\n    this.socket = new WebSocket(\"ws://\" + window.location.host);\n    this.callId = 0;\n    this.calls = new Map();\n    this.socket.addEventListener(\"message\", ({ data }) => {\n      try {\n        if (typeof data === \"string\") {\n          const packet = JSON.parse(data);\n          const { structure } = packet;\n          if (structure && this.rebuildStructure) {\n            this.rebuildStructure(structure);\n            return;\n          }\n          const { callId } = packet;\n          const promised = this.calls.get(callId);\n          if (!promised) return;\n          const [resolve, reject] = promised;\n          if (packet.error) {\n            const { code, message } = packet.error;\n            const error = new Error(message);\n            error.code = code;\n            reject(error);\n            return;\n          }\n          resolve(packet.result);\n        } else {\n          if (this.names.length !== 0) {\n            const item = this.names[this.counter];\n            const name = item.slice(item.lastIndexOf(\"/\") + 1);\n            downloadFile(name, data);\n            this.counter = (this.counter + 1) % this.names.length;\n          }\n        }\n      } catch (err) {\n        console.error(err);\n      }\n    });\n  }\n\n  clearBuffers() {\n    this.buffers = [];\n  }\n\n  ready() {\n    return new Promise((resolve) => {\n      if (this.socket.readyState === WebSocket.OPEN) resolve();\n      else this.socket.addEventListener(\"open\", resolve);\n    });\n  }\n\n  async socketCall(msg, args) {\n    const callId = ++this.callId;\n    await this.ready();\n    return new Promise((resolve, reject) => {\n      this.calls.set(callId, [resolve, reject]);\n      const packet = { callId, msg, args };\n      this.socket.send(JSON.stringify(packet));\n    });\n  }\n\n  bufferCall(buffer) {\n    this.socket.send(buffer);\n  }\n}\n","import React from \"react\";\nimport { BrowserRouter, Switch, Route, Redirect } from \"react-router-dom\";\nimport PrivateRoute from \"./Components/PrivateRoot\";\nimport Permanent from \"./Components/Permanent\";\nimport Temporary from \"./Components/Temporary\";\nimport LoginForm from \"./Components/LoginForm\";\nimport Transport from \"./additional/socket\";\n\nconst NotFound = (props) => <h1>NOT FOUND</h1>;\n\nexport default class App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      authed: false,\n    };\n    this.transport = new Transport();\n  }\n\n  async componentDidMount() {\n    const token = localStorage.getItem(\"token\");\n    if (token) {\n      const authed = await this.transport.socketCall(\"restoreSession\", {\n        token,\n      });\n      console.log(authed);\n      if (authed) {\n        this.setState({ authed: true });\n      }\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"App\">\n        <BrowserRouter>\n          <Switch>\n            <Route\n              exact\n              path=\"/\"\n              render={() => {\n                return this.state.authed ? (\n                  <Redirect to=\"/permanent\" />\n                ) : (\n                  <Redirect to=\"/login\" />\n                );\n              }}\n            />\n            <PrivateRoute\n              authed={this.state.authed}\n              transport={this.transport}\n              redirect=\"/login\"\n              path=\"/permanent\"\n              component={Permanent}\n            />\n            <Route\n              exact\n              path=\"/temporary\"\n              render={() => <Temporary transport={this.transport} />}\n            />\n            {/* <PrivateRoute \n              authed={this.state.authed} \n              socket={this.socket} \n              redirect='/login'\n              path='/temporary' \n              component={Temporary} \n            /> */}\n            <PrivateRoute\n              authed={!this.state.authed}\n              transport={this.transport}\n              callback={(token) => {\n                localStorage.setItem(\"token\", token);\n                this.setState({ authed: true });\n              }}\n              redirect=\"/permanent\"\n              path=\"/login\"\n              component={LoginForm}\n            />\n            <Route component={NotFound} />\n          </Switch>\n        </BrowserRouter>\n      </div>\n    );\n  }\n}\n","const reportWebVitals = (onPerfEntry) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import(\"web-vitals\").then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport \"./combined.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\nreportWebVitals();\n"],"sourceRoot":""}