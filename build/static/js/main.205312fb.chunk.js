(this.webpackJsonpcloud_strorage_client_react=this.webpackJsonpcloud_strorage_client_react||[]).push([[0],{32:function(e,t,a){},33:function(e,t,a){},44:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a.n(n),r=a(24),c=a.n(r),o=(a(32),a(33),a(6)),i=a.n(o),l=a(14),u=a(4),h=a(5),d=a(9),b=a(8),j=a(16),m=a(2),f=a(17),p=a(27),v=a(0);function O(e){var t=e.component,a=e.authed,n=e.transport,s=e.callback,r=e.redirect,c=Object(p.a)(e,["component","authed","transport","callback","redirect"]);return Object(v.jsx)(m.b,Object(f.a)(Object(f.a)({},c),{},{render:function(e){return!0===a?Object(v.jsx)(t,Object(f.a)({authed:a,transport:n,callback:s},e)):Object(v.jsx)(m.a,{to:r})}}))}var x=a(7),g=a(13),k=function(e){Object(d.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={},n}return Object(h.a)(a,[{key:"render",value:function(){return Object(v.jsxs)("div",{className:"header",children:[Object(v.jsx)("div",{className:"logo-box",children:Object(v.jsx)("img",{className:"logo",src:"/icons/logo.svg",alt:""})}),Object(v.jsxs)("div",{className:"locations",children:[Object(v.jsx)(j.b,{className:"location ".concat("/permanent"===this.props.location.pathname?"active":""),to:"/permanent",children:"Permanent"}),Object(v.jsx)(j.b,{className:"location ".concat("/temporary"===this.props.location.pathname?"active":""),to:"/temporary",children:"Temporary"})]})]})}}]),a}(s.a.Component),w=Object(m.g)((function(e){return Object(v.jsx)(k,Object(f.a)({},e))})),y=function(e){Object(d.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={},n}return Object(h.a)(a,[{key:"render",value:function(){var e=this;return function t(a){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=a.map((function(a,r){var c=s.a.createRef(),o=s.a.createRef();return null!==a.children?Object(v.jsxs)("div",{className:"accordeon",children:[Object(v.jsxs)("div",{className:"accordeon-head",children:[Object(v.jsx)("div",{className:"accordeon-title",onClick:function(){return e.props.onItemClick(a,n)},children:a.name}),Object(v.jsx)("button",{className:"dropdown-button",onClick:function(){c.current.classList.toggle("active"),o.current.classList.toggle("active"),e.forceUpdate()},children:Object(v.jsx)("img",{className:"dropdown-icon",src:"".concat("","/icons/arrow.svg"),alt:"Dropdown",ref:o})})]}),Object(v.jsx)("div",{className:"accordeon-body",style:{marginLeft:"16px"},ref:c,children:t(a.children,"".concat(n).concat(a.name,"/"))})]},r):Object(v.jsx)("div",{className:"file-title",onClick:function(){return e.props.onItemClick(a,n)},children:a.name},r)}));return r}(this.props.dataset)}}]),a}(s.a.Component),N=function(e,t){if(-1===t.indexOf("/"))return e;var a,n=t.split("/"),s=e,r=Object(x.a)(n);try{for(r.s();!(a=r.n()).done;){var c,o=a.value,i=Object(x.a)(s);try{for(i.s();!(c=i.n()).done;){var l=c.value;l.name===o&&(s=l.children)}}catch(u){i.e(u)}finally{i.f()}}}catch(u){r.e(u)}finally{r.f()}return s},C=function(e){var t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)},S=function e(t,a){var n,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=Object(x.a)(a);try{for(c.s();!(n=c.n()).done;){var o=n.value;null!==o.children?(e("".concat(t).concat(o.name,"/"),o.children,s,r),r&&s.push("".concat(t).concat(o.name,"/"))):s.push("".concat(t).concat(o.name))}}catch(i){c.e(i)}finally{c.f()}return s},F=function(e){var t=["b","Kb","Mb","Gb","Tb"],a=Math.floor(Math.log10(e)/3),n=t[a],s=e/Math.pow(10,3*a)|0;return"".concat(Math.round(100*(s+Number.EPSILON))/100," ").concat(n||t[0])},P=function(e){Object(d.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={timeout:null,renameValue:""},n}return Object(h.a)(a,[{key:"render",value:function(){var e=this;return Object(v.jsxs)("ul",{className:"current-folder-list",children:[" ",N(this.props.dataset,this.props.currentPath).map((function(t,a){var n=null===t.children?"".concat("","/icons/file.svg"):"".concat("","/icons/folder.svg"),s=(e.props.active.includes(t)?"active ":"")+"folder-list-el";e.props.holdTime,t.name;return Object(v.jsxs)("li",{className:s,onDoubleClick:function(){e.props.goTo(t)},onClick:function(){e.props.select(t)},children:[Object(v.jsx)("img",{className:"el-icon",src:n}),e.props.renameIndex===a?Object(v.jsx)("input",{className:"el-input",value:e.state.renameValue||t.name,onChange:function(t){e.setState({renameValue:t.target.value})},onKeyPress:function(t){"Enter"===t.key&&(e.props.onRename(e.state.renameValue),e.setState({renameValue:""}))}}):Object(v.jsx)("div",{className:"el-name",children:t.name}),Object(v.jsx)("div",{className:"el-capacity",children:F(t.capacity)})]},a)}))]})}}]),a}(s.a.Component),I=function(e){Object(d.a)(a,e);var t=Object(b.a)(a);function a(e){var n;Object(u.a)(this,a),(n=t.call(this,e)).state={dataset:[],currentPath:"",favourites:[{path:"",name:"home"}],selected:[],selectState:!1,creatingNewFolder:!1,newFolderName:"New Folder",renameIndex:-1},n.buffers=[],n.transport=n.props.transport,n.transport.rebuildStructure=function(e){n.setState({dataset:e,selected:[],renameIndex:-1,selectState:!1,creatingNewFolder:!1})};var s,r=Object(x.a)(Object.getOwnPropertyNames(Object.getPrototypeOf(Object(g.a)(n))));try{for(r.s();!(s=r.n()).done;){var c=s.value;["constructor","render"].includes(c)||(n[c]=n[c].bind(Object(g.a)(n)))}}catch(o){r.e(o)}finally{r.f()}return n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=Object(l.a)(i.a.mark((function e(){var t,a=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(document.addEventListener("keydown",(function(e){"F2"===e.key&&1===a.state.selected.length&&-1===a.state.renameIndex&&a.rename()}),!1),!this.props.authed){e.next=6;break}return e.next=4,this.transport.socketCall("availableStructure",{});case 4:t=e.sent,this.setState({dataset:t});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"filesSelected",value:function(){var e=Object(l.a)(i.a.mark((function e(t){var a,n,s,r,c,o,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=[],n=Object(x.a)(t.target.files);try{for(n.s();!(s=n.n()).done;)r=s.value,a.push("".concat(this.state.currentPath).concat(r.name))}catch(i){n.e(i)}finally{n.f()}return e.next=5,this.transport.socketCall("pmtUploadStart",{fileList:a});case 5:c=Object(x.a)(t.target.files),e.prev=6,c.s();case 8:if((o=c.n()).done){e.next=14;break}return l=o.value,e.next=12,this.transport.bufferCall(l);case 12:e.next=8;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(6),c.e(e.t0);case 19:return e.prev=19,c.f(),e.finish(19);case 22:return e.next=24,this.transport.socketCall("pmtUploadEnd",{fileList:a});case 24:t.target.value="";case 25:case"end":return e.stop()}}),e,this,[[6,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()},{key:"createLink",value:function(){if(1===this.state.selected.length&&null===this.state.selected[0].children){var e="".concat(this.state.currentPath).concat(this.state.selected[0].name);this.transport.socketCall("createLink",{name:e}).then(function(){var e=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:C("".concat(window.location.origin,"/link/").concat(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch(console.log)}}},{key:"download",value:function(){var e=S(this.state.currentPath,this.state.selected);console.log(e,this.state.currentPath),this.transport.names=e,this.transport.socketCall("pmtDownload",{fileList:e}).catch(console.log)}},{key:"delete",value:function(){var e=S(this.state.currentPath,this.state.selected,[],!0);console.log(e),this.transport.socketCall("delete",{fileList:e}).then().catch(console.log)}},{key:"rename",value:function(){if(1===this.state.selected.length){console.log(this.state.selected);var e=this.state.selected[0].name,t=N(this.state.dataset,this.state.currentPath).map((function(e){return e.name})).indexOf(e);this.setState({renameIndex:t})}}},{key:"addToFavourites",value:function(){if(1===this.state.selected.length&&null!==this.state.selected[0].children){var e=this.state.selected[0].name,t=this.state.favourites;if(t.map((function(e){return e.name})).includes(e)){var a=t.indexOf(e);t.splice(a,1)}else t.push({name:e,path:e+"/"});this.setState({favourites:t})}}},{key:"goTo",value:function(e){null!==e.children&&-1===this.state.renameIndex&&this.setState({currentPath:"".concat(this.state.currentPath).concat(e.name,"/"),selected:[],renameIndex:-1,selectState:!1,creatingNewFolder:!1})}},{key:"render",value:function(){var e=this;return Object(v.jsxs)("div",{children:[Object(v.jsx)(w,{}),Object(v.jsx)("div",{className:"permanent",children:Object(v.jsxs)("div",{className:"explorer",children:[Object(v.jsxs)("div",{className:"list-header",children:[Object(v.jsx)("div",{className:"path",children:"/"+this.state.currentPath.slice(0,-1)}),Object(v.jsx)("input",{style:{display:"none"},id:"files",type:"file",onChange:this.filesSelected,multiple:!0}),Object(v.jsxs)("div",{className:"control-buttons",children:[Object(v.jsx)("button",{className:"active control-button",onClick:function(){e.setState({creatingNewFolder:!0,newFolderName:"New Folder"})},children:Object(v.jsx)("img",{src:"".concat("","/icons/newfolder.svg"),alt:"New Folder"})}),Object(v.jsx)("label",{className:"active control-button",htmlFor:"files",children:Object(v.jsx)("img",{src:"".concat("","/icons/upload.svg"),alt:"Upload"})}),Object(v.jsx)("button",{className:(1===this.state.selected.length&&null!==this.state.selected[0].children?"active ":"")+"control-button",onClick:this.addToFavourites,children:Object(v.jsx)("img",{src:"".concat("","/icons/bookmark.svg"),alt:"Bookmark"})}),Object(v.jsx)("button",{className:(1===this.state.selected.length&&null===this.state.selected[0].children?"active ":"")+"control-button",onClick:this.createLink,children:Object(v.jsx)("img",{src:"".concat("","/icons/link.svg"),alt:"Link"})}),Object(v.jsx)("button",{className:(1===this.state.selected.length?"active ":"")+"control-button",onClick:this.rename,children:Object(v.jsx)("img",{src:"".concat("","/icons/edit.svg"),alt:"Edit"})}),Object(v.jsx)("button",{className:(0===this.state.selected.length?"":"active ")+"control-button",onClick:this.download,children:Object(v.jsx)("img",{src:"".concat("","/icons/download.svg"),alt:"Download"})}),Object(v.jsx)("button",{className:(0===this.state.selected.length?"":"active ")+"control-button",onClick:this.delete,children:Object(v.jsx)("img",{src:"".concat("","/icons/delete.svg"),alt:"Delete"})})]})]}),Object(v.jsxs)("div",{className:"main",children:[Object(v.jsxs)("div",{className:"navbar",children:[Object(v.jsx)("div",{className:"favourites",children:this.state.favourites.map((function(t,a){return Object(v.jsx)("div",{className:"favourites-title",onClick:function(){-1===e.state.renameIndex&&e.setState({currentPath:t.path,selected:[],renameIndex:-1,selectState:!1,creatingNewFolder:!1})},children:t.name},a)}))}),Object(v.jsx)(y,{dataset:this.state.dataset,onItemClick:function(t,a){null!==t.children&&e.setState({currentPath:"".concat(a).concat(t.name,"/"),selected:[],renameIndex:-1,selectState:!1,creatingNewFolder:!1})}})]}),Object(v.jsxs)("div",{className:"hierarchy",children:[Object(v.jsx)(P,{currentPath:this.state.currentPath,dataset:this.state.dataset,active:this.state.selected,renameIndex:this.state.renameIndex,onRename:function(t){var a=e.state.selected[0],n=a.name,s="".concat(e.state.currentPath).concat(n).concat(null===a.children?"":"/");e.setState({renameIndex:-1,selected:[]}),e.transport.socketCall("rename",{name:s,newName:"".concat(e.state.currentPath).concat(t).concat(null===a.children?"":"/")})},goTo:this.goTo,select:function(t){if(-1===e.state.renameIndex){if(e.state.selected.includes(t)){var a=e.state.selected.indexOf(t);e.state.selected.splice(a,1)}else e.state.selected.push(t);e.forceUpdate()}}}),this.state.creatingNewFolder?Object(v.jsxs)("div",{className:"new-folder",children:[Object(v.jsx)("img",{className:"el-icon",src:"".concat("","/icons/folder.svg")}),Object(v.jsx)("input",{className:"el-input",value:this.state.newFolderName,onChange:function(t){return e.setState({newFolderName:t.target.value})},onKeyPress:function(t){"Enter"===t.key&&e.transport.socketCall("newFolder",{name:"".concat(e.state.currentPath).concat(e.state.newFolderName,"/")})}})]}):""]})]})]})})]})}}]),a}(s.a.Component),E=function(e){Object(d.a)(a,e);var t=Object(b.a)(a);function a(e){var n;Object(u.a)(this,a),(n=t.call(this,e)).state={files:[],tab:"upload",chosen:["None"],token:"",availableFiles:[],input:"",error:""},n.timer=null,n.buffers=[],n.transport=n.props.transport;var s,r=Object(x.a)(Object.getOwnPropertyNames(Object.getPrototypeOf(Object(g.a)(n))));try{for(r.s();!(s=r.n()).done;){var c=s.value;["constructor","render"].includes(c)||(n[c]=n[c].bind(Object(g.a)(n)))}}catch(o){r.e(o)}finally{r.f()}return n}return Object(h.a)(a,[{key:"showError",value:function(e){var t=this;this.setState({error:e.message}),this.timer&&clearTimeout(this.timer),this.timer=setTimeout((function(){return t.setState({error:""})}),5e3)}},{key:"fileUploadChange",value:function(e){var t,a=[],n=Object(x.a)(e.target.files);try{for(n.s();!(t=n.n()).done;){var s=t.value;a.push(s.name)}}catch(r){n.e(r)}finally{n.f()}this.setState({files:e.target.files,chosen:a})}},{key:"tokenInputChange",value:function(e){this.setState({input:e.target.value,availableFiles:[]})}},{key:"upload",value:function(){var e=Object(l.a)(i.a.mark((function e(){var t,a,n,s,r=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!==this.state.chosen.length||"None"!==this.state.chosen[0]){e.next=3;break}return this.showError(new Error("Nothing selected. Select, then upload")),e.abrupt("return");case 3:this.setState({token:"loading..."}),t=[],a=Object(x.a)(this.state.files);try{for(a.s();!(n=a.n()).done;)s=n.value,t.push(s.name)}catch(c){a.e(c)}finally{a.f()}this.transport.socketCall("tmpUpload",{fileList:t}).then((function(e){var t,a=Object(x.a)(r.state.files);try{for(a.s();!(t=a.n()).done;){var n=t.value;r.transport.bufferCall(n)}}catch(c){a.e(c)}finally{a.f()}r.setState({token:e,files:[],chosen:["None"],availableFiles:[]})})).catch(this.showError);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getFilenames",value:function(){var e=this;0!==this.state.input.length?this.transport.socketCall("availableFiles",{token:this.state.input}).then((function(t){return e.setState({availableFiles:t})})).catch(this.showError):this.showError(new Error("Enter valid token please"))}},{key:"download",value:function(e){var t="Download All"===e.target.innerText?this.state.availableFiles:[e.target.innerText];this.transport.names=t,this.transport.socketCall("tmpDownload",{token:this.state.input.trim(),fileList:t}).catch(this.showError)}},{key:"render",value:function(){var e=this,t=0===this.state.availableFiles.length?Object(v.jsx)("button",{className:"form-btn",onClick:this.getFilenames,children:"Check Available"}):Object(v.jsxs)("div",{className:"available",children:[Object(v.jsx)("h1",{className:"form-title",children:"Available:"}),Object(v.jsx)("ul",{id:"file-list",children:this.state.availableFiles.map((function(t){return Object(v.jsx)("li",{children:Object(v.jsx)("a",{download:t,onClick:e.download,children:t})})}))}),Object(v.jsx)("button",{className:"form-btn",onClick:this.download,children:"Download All"})]}),a=Object(v.jsxs)("div",{className:"upload tab",children:[Object(v.jsx)("input",{id:"files",type:"file",value:this.state.value,onChange:this.fileUploadChange,multiple:!0}),""!==this.state.token?Object(v.jsxs)("h1",{className:"form-token ",children:["Your token: ",this.state.token,Object(v.jsx)("button",{className:"active control-button",onClick:function(){C(e.state.token)},children:Object(v.jsx)("img",{src:"".concat("","/icons/copy.svg"),alt:"copy"})})]}):"",Object(v.jsx)("h1",{className:"form-title",children:"Chosen:"}),Object(v.jsx)("ul",{id:"file-list",children:this.state.chosen.map((function(e,t){return Object(v.jsx)("li",{children:e},t)}))}),Object(v.jsxs)("div",{className:"buttons",children:[Object(v.jsx)("label",{className:"input-btn form-btn",htmlFor:"files",children:"Choose files"}),Object(v.jsx)("button",{className:"form-btn",onClick:this.upload,children:"Upload"})]})]}),n=Object(v.jsxs)("div",{className:"download tab",children:[Object(v.jsx)("h1",{className:"form-title",children:"Enter Token"}),Object(v.jsx)("input",{id:"token",type:"text",value:this.state.input,onChange:this.tokenInputChange}),t]});return Object(v.jsxs)("div",{children:[Object(v.jsx)(w,{}),Object(v.jsxs)("div",{className:"temporary",children:[Object(v.jsxs)("div",{className:"tabs",children:[Object(v.jsx)("button",{className:"tab-btn "+("upload"===this.state.tab?"active":""),onClick:function(){return e.setState({tab:"upload"})},children:"Upload"}),Object(v.jsx)("button",{className:"tab-btn "+("download"===this.state.tab?"active":""),onClick:function(){return e.setState({tab:"download"})},children:"Download"})]}),Object(v.jsx)("div",{className:"tabulator",children:"upload"===this.state.tab?a:n}),Object(v.jsx)("h1",{className:"error-box",children:this.state.error})]})]})}}]),a}(s.a.Component),L=function(e){Object(d.a)(a,e);var t=Object(b.a)(a);function a(e){var n;Object(u.a)(this,a),(n=t.call(this,e)).state={login:"",password:"",error:""},n.timer=null,n.transport=n.props.transport;var s,r=Object(x.a)(Object.getOwnPropertyNames(Object.getPrototypeOf(Object(g.a)(n))));try{for(r.s();!(s=r.n()).done;){var c=s.value;["constructor","render"].includes(c)||(n[c]=n[c].bind(Object(g.a)(n)))}}catch(o){r.e(o)}finally{r.f()}return n}return Object(h.a)(a,[{key:"auth",value:function(){for(var e=0,t=[[this.state.login.length<5||this.state.password.length<5||this.state.login.length>16||this.state.password.length>16,{message:"Login & password length should be 5..16"}],[null===this.state.login.match("^[a-zA-Z0-9_.-]*$")||null===this.state.password.match("^[a-zA-Z0-9_.-]*$"),{message:"Login & password should only contain [a-zA-Z0-9_.-]"}]];e<t.length;e++){var a=t[e];if(a[0])return void this.showError(a[1])}this.transport.socketCall("authUser",{user:{login:this.state.login,password:this.state.password}}).then(this.props.callback).catch(this.showError)}},{key:"showError",value:function(e){var t=this;console.log("IN SHOWERROR: ",e),this.setState({error:e.message}),this.timer&&clearTimeout(this.timer),this.timer=setTimeout((function(){return t.setState({error:""})}),5e3)}},{key:"render",value:function(){var e=this;return Object(v.jsxs)("div",{className:"login-form",children:[Object(v.jsx)("h1",{className:"form-title",children:"Login"}),Object(v.jsx)("input",{className:"form-field",value:this.login,onChange:function(t){return e.setState({login:t.target.value})},type:"text",name:"input",placeholder:"Enter login"}),Object(v.jsx)("input",{className:"form-field",value:this.password,onChange:function(t){return e.setState({password:t.target.value})},type:"password",name:"input",placeholder:"Enter password"}),Object(v.jsx)("button",{className:"form-button",onClick:this.auth,children:"Login"}),Object(v.jsx)("h1",{className:"error-box",children:this.state.error})]})}}]),a}(s.a.Component),T=a(26),U=function(){function e(){var t=this;Object(u.a)(this,e),this.rebuildStructure=null,this.names=[],this.counter=0,this.socket=new WebSocket("ws://"+window.location.host),this.callId=0,this.calls=new Map,this.socket.addEventListener("message",(function(e){var a=e.data;try{if("string"===typeof a){var n=JSON.parse(a),s=n.structure;if(s&&t.rebuildStructure)return void t.rebuildStructure(s);var r=n.callId,c=t.calls.get(r);if(!c)return;var o=Object(T.a)(c,2),i=o[0],l=o[1];if(n.error){var u=n.error,h=u.code,d=u.message,b=new Error(d);return b.code=h,void l(b)}i(n.result)}else if(0!==t.names.length){var j=t.names[t.counter];!function(e,t){var a=window.URL.createObjectURL(t),n=document.createElement("a");n.href=a,n.setAttribute("download",e),document.body.appendChild(n),n.click(),n.parentNode.removeChild(n),window.URL.revokeObjectURL(a)}(j.slice(j.lastIndexOf("/")+1),a),t.counter=(t.counter+1)%t.names.length}}catch(m){console.error(m)}}))}return Object(h.a)(e,[{key:"clearBuffers",value:function(){this.buffers=[]}},{key:"ready",value:function(){var e=this;return new Promise((function(t){e.socket.readyState===WebSocket.OPEN?t():e.socket.addEventListener("open",t)}))}},{key:"socketCall",value:function(){var e=Object(l.a)(i.a.mark((function e(t,a){var n,s=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=++this.callId,e.next=3,this.ready();case 3:return e.abrupt("return",new Promise((function(e,r){s.calls.set(n,[e,r]);var c={callId:n,msg:t,args:a};s.socket.send(JSON.stringify(c))})));case 4:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"bufferCall",value:function(e){this.socket.send(e)}}]),e}(),D=function(e){return Object(v.jsx)("h1",{children:"NOT FOUND"})},R=function(e){Object(d.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={authed:!1},n.transport=new U,n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=Object(l.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=localStorage.getItem("token"))){e.next=7;break}return e.next=4,this.transport.socketCall("restoreSession",{token:t});case 4:a=e.sent,console.log(a),a&&this.setState({authed:!0});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(v.jsx)("div",{className:"App",children:Object(v.jsx)(j.a,{children:Object(v.jsxs)(m.d,{children:[Object(v.jsx)(m.b,{exact:!0,path:"/",render:function(){return e.state.authed?Object(v.jsx)(m.a,{to:"/permanent"}):Object(v.jsx)(m.a,{to:"/login"})}}),Object(v.jsx)(O,{authed:this.state.authed,transport:this.transport,redirect:"/login",path:"/permanent",component:I}),Object(v.jsx)(m.b,{exact:!0,path:"/temporary",render:function(){return Object(v.jsx)(E,{transport:e.transport})}}),Object(v.jsx)(O,{authed:!this.state.authed,transport:this.transport,callback:function(t){localStorage.setItem("token",t),e.setState({authed:!0})},redirect:"/permanent",path:"/login",component:L}),Object(v.jsx)(m.b,{component:D})]})})})}}]),a}(s.a.Component),A=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,45)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,r=t.getLCP,c=t.getTTFB;a(e),n(e),s(e),r(e),c(e)}))};c.a.render(Object(v.jsx)(s.a.StrictMode,{children:Object(v.jsx)(R,{})}),document.getElementById("root")),A()}},[[44,1,2]]]);
//# sourceMappingURL=main.205312fb.chunk.js.map